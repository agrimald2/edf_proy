import _ from"./PermutaRejectReasonModal-D0o76cMj.js";import g from"./PermutaApproveConfirmationModal-C-i_ajjz.js";import w from"./PermutaApprovedModal-8LxP4zdU.js";import b from"./PermutaRejectedModal-DBNpiQ_D.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{i as m,o as l,e as c,a as e,t as a,f as d,g as r,c as p}from"./app-BHd6Gmi0.js";const y={components:{PermutaRejectReasonModal:_,PermutaApproveConfirmationModal:g,PermutaApprovedModal:w,PermutaRejectedModal:b},props:{show:{type:Boolean,default:!1},permuta:{type:Object,required:!0},haveAvailableLimit:{type:Boolean,default:!0},sv:{type:String}},data(){return{formData:{date:new Date(this.permuta.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),clientCode:this.permuta.cod_cliente,volumeCU:this.permuta.volume,location:this.permuta.location.name,route:this.permuta.route,subcanal:this.permuta.subcanal,haveEdf:this.permuta.have_edf,doorsToNegotiate:this.permuta.doors_to_negotiate,condition:this.permuta.condition,reason:this.permuta.reason,justification:this.permuta.justification},reasons:[],sentPermutaViewModal:!1,errorMessage:"",isSubmitting:!1,errorMessage:"",isSubmitting:!1,showDetails:!0,showRejectReasonModal:!1,showRejectedModal:!1,showApproveConfirmationModal:!1,showApprovedModal:!1}},mounted(){fetch("/api/permuta-reasons").then(u=>u.json()).then(u=>{this.reasons=u}).catch(u=>{console.error("Error fetching reasons:",u)})},methods:{approvePermuta(){this.showDetails=!1,this.showApproveConfirmationModal=!0},rejectPermuta(){this.showDetails=!1,this.showRejectReasonModal=!0},detailsModal(){console.log("A"),this.showDetails=!0,this.showRejectReasonModal=!1,this.showRejectedModal=!1,this.showApproveConfirmationModal=!1,this.showApprovedModal=!1},closeModal(){this.$emit("close"),this.detailsModal()}}},j={class:"z-20 fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center"},C={class:"bg-white rounded-lg shadow-lg w-96 p-6 relative"},D=e("i",{class:"fa-solid fa-circle-xmark text-gray-500"},null,-1),A=[D],P={key:0},x=e("div",{class:"text-center mb-10 pt-2"},[e("h2",{class:"text-lg font-bold"},"Detalles de Permuta"),e("p",null,"Revisa la información de la permuta")],-1),k={key:0,class:"text-red-500 text-center mb-4"},S={class:"space-y-2"},B=e("p",{class:"font-semibold mb-2"},"Información del cliente",-1),E={class:"space-y-2"},N=e("span",{class:"font-medium"},"Código de cliente:",-1),V=e("span",{class:"font-medium"},"Fecha de permuta:",-1),L=e("span",{class:"font-medium"},"Volumen en CU:",-1),T=e("span",{class:"font-medium"},"Locación:",-1),U=e("span",{class:"font-medium"},"Ruta:",-1),F=e("span",{class:"font-medium"},"Subcanal:",-1),O=e("p",{class:"font-semibold mt-4"},"EDF a solicitar",-1),q=e("span",{class:"font-medium"},"Condición:",-1),z=e("span",{class:"font-medium"},"Puertas a negociar:",-1),H=e("span",{class:"font-medium"},"Motivo:",-1),I=e("span",{class:"font-medium"},"Justificación:",-1),J={key:0,class:"mt-2 pt-2 flex justify-between"},Z={class:"mt-2 text-center bg-white border rounded-lg py-2 border-black font-medium"};function G(u,t,i,K,o,n){const f=m("PermutaRejectReasonModal"),h=m("PermutaRejectedModal"),v=m("PermutaApproveConfirmationModal"),M=m("PermutaApprovedModal");return l(),c("div",j,[e("div",C,[e("button",{onClick:t[0]||(t[0]=(...s)=>n.closeModal&&n.closeModal(...s)),class:"absolute top-2 right-2 text-gray-500 hover:text-gray-700"},A),o.showDetails?(l(),c("div",P,[x,e("div",null,[o.errorMessage?(l(),c("div",k,a(o.errorMessage),1)):d("",!0),e("div",S,[B,e("div",E,[e("p",null,[N,r(" "+a(o.formData.clientCode),1)]),e("p",null,[V,r(" "+a(o.formData.date),1)]),e("p",null,[L,r(" "+a(o.formData.volumeCU),1)]),e("p",null,[T,r(" "+a(o.formData.location),1)]),e("p",null,[U,r(" "+a(o.formData.route),1)]),e("p",null,[F,r(" "+a(o.formData.subcanal),1)]),O,e("p",null,[q,r(" "+a(o.formData.condition),1)]),e("p",null,[z,r(" "+a(o.formData.doorsToNegotiate),1)]),e("p",null,[H,r(" "+a(o.formData.reason),1)]),e("p",null,[I,r(" "+a(o.formData.justification),1)])]),i.permuta.supervisor_status=="Pending"&&i.haveAvailableLimit?(l(),c("div",J,[e("button",{onClick:t[1]||(t[1]=(...s)=>n.approvePermuta&&n.approvePermuta(...s)),class:"w-1/2 py-3 font-medium rounded-md bg-green-500 text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50 mr-2"}," APROBAR "),e("button",{onClick:t[2]||(t[2]=(...s)=>n.rejectPermuta&&n.rejectPermuta(...s)),class:"w-1/2 py-3 font-medium rounded-md bg-red-500 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-opacity-50 ml-2"}," RECHAZAR ")])):d("",!0)]),e("div",Z,[e("button",{onClick:t[3]||(t[3]=(...s)=>n.closeModal&&n.closeModal(...s)),class:"text-black hover:underline focus:outline-none rounded-full"},"Cerrar")])])])):d("",!0),o.showRejectReasonModal?(l(),p(f,{key:1,"permuta-id":i.permuta.id,onShowDetailsModal:n.detailsModal,onShowRejectedModal:t[4]||(t[4]=s=>o.showRejectedModal=!0),onClose:t[5]||(t[5]=s=>o.showRejectReasonModal=!1)},null,8,["permuta-id","onShowDetailsModal"])):d("",!0),o.showRejectedModal?(l(),p(h,{key:2,"permuta-id":i.permuta.id,onClose:t[6]||(t[6]=s=>o.showRejectedModal=!1)},null,8,["permuta-id"])):d("",!0),o.showApproveConfirmationModal?(l(),p(v,{key:3,"permuta-id":i.permuta.id,sv:i.sv,onShowDetailsModal:n.detailsModal,onClose:t[7]||(t[7]=s=>o.showApproveConfirmationModal=!1),onShowApprovedModal:t[8]||(t[8]=s=>o.showApprovedModal=!0)},null,8,["permuta-id","sv","onShowDetailsModal"])):d("",!0),o.showApprovedModal?(l(),p(M,{key:4,"permuta-id":i.permuta.id,onClose:t[9]||(t[9]=s=>o.showApprovedModal=!1)},null,8,["permuta-id"])):d("",!0)])])}const oe=R(y,[["render",G]]);export{oe as default};
