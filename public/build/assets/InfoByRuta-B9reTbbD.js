import{d as f,C as F,x as p,o,c as b,w as O,a as e,t as l,u as m,m as w,y as L,f as r,g as _,s as P,n as u,e as a,h as V,F as j}from"./app-D4KluA6q.js";import{_ as B}from"./GuestLayout-D1coCNPc.js";import z from"./AddPermutaModal-yMoewIfX.js";import $ from"./CatalogoModal-zVm3rwPQ.js";import J from"./NotificationModal-Cfa10QLA.js";import"./Banner-qM_6eePH.js";import"./PermutaSent-DDIZo-EK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EdfTypesCarrousel-DBlv3Un0.js";import"./CondicionesCarrousel-DgwfsA1b.js";const H={class:"grid grid-cols-2 gap-4 items-center"},Y={class:"text-sm"},Q={class:"font-bold text-sm text-black leading-tight"},W={class:"flex items-center gap-2"},q=e("option",{value:""},"TODOS",-1),K=e("option",{value:"LUNES"},"Lunes",-1),X=e("option",{value:"MARTES"},"Martes",-1),Z=e("option",{value:"MIERCOLES"},"Miércoles",-1),ee=e("option",{value:"JUEVES"},"Jueves",-1),te=e("option",{value:"VIERNES"},"Viernes",-1),se=e("option",{value:"SABADO"},"Sábado",-1),oe=e("option",{value:"DOMINGO"},"Domingo",-1),le=[q,K,X,Z,ee,te,se,oe],ae=e("i",{class:"fa-solid fa-bell text-xl"},null,-1),de=e("span",{class:"absolute top-0 right-0 inline-block w-4 h-4 bg-red-600 text-white text-xs font-bold rounded-full text-center"},"3",-1),ne=[ae,de],re={class:"py-6"},ie={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ce={class:"overflow-hidden p-4"},ue={class:"flex flex-col gap-4"},_e={class:"flex flex-row gap-4 w-3/4"},fe={class:"bg-green-600 rounded-lg flex-1 flex flex-col p-4"},xe=e("div",{class:"flex items-center justify-between w-full mb-2"},[e("i",{class:"fa-solid fa-users text-white text-3xl"})],-1),he=e("h3",{class:"text-md text-white"},"EDF negociados",-1),Ee={class:"text-white text-3xl font-bold text-left w-full"},ge={class:"bg-red-600 rounded-lg flex-1 flex flex-col p-4"},pe=e("div",{class:"flex items-center justify-start w-full mb-2"},[e("i",{class:"fa-solid fa-users text-white text-3xl"})],-1),be=e("h3",{class:"text-md text-white text-left"},"EDF pendientes",-1),me={class:"text-white text-3xl font-bold text-left"},Ce=e("i",{class:"fa-solid fa-eye mr-2"},null,-1),Ne={class:"px-2"},ve=e("h1",{class:"p-2 font-bold"}," Lista de oportunidad Clientes ",-1),Oe={class:"pt-2 relative mx-auto text-gray-600 w-full"},we={class:"flex gap-2 my-4"},Ae={class:"p-2 overflow-hidden shadow-xl sm:rounded-lg"},Te={class:"flex flex-col gap-4"},ye={class:"flex-1 border-r border-gray-200"},De={class:"p-4"},Ie={style:{"font-size":"10px"},class:"text-sm font-semibold"},Se=e("i",{class:"fa-solid fa-user"},null,-1),ke={style:{"font-size":"10px"},class:"text-sm"},Ue={class:"mt-2"},Re={key:0,class:"bg-red-100 text-red-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-red-200 dark:text-red-900"},Ge=e("i",{class:"fa-solid fa-fax"},null,-1),Me={key:1,class:"bg-yellow-100 text-yellow-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-yellow-200 dark:text-yellow-900"},Fe=e("i",{class:"fa-solid fa-fax"},null,-1),Le=e("br",null,null,-1),Pe={key:2,class:"text-green-600 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-red-200 dark:text-red-900"},Ve=e("i",{class:"fa-solid fa-calendar-days"},null,-1),je={key:0},Be={key:1,class:"text-red-600"},ze={key:0,class:"flex-1 text-left"},$e={class:"p-4 text-left"},Je=e("div",{class:"text-sm text-black font-bold"},"Puedes negociar",-1),He={class:"list-disc pl-3"},Ye={style:{"font-size":"10px"},class:"text-xs mt-1"},Qe={key:0,style:{"font-size":"10px"},class:"mb-2 text-xs mt-1"},We=["href"],qe=e("i",{class:"fa-brands fa-whatsapp"},null,-1),Ke={key:1,class:"flex-1 text-left"},Xe={class:"p-4 text-left"},Ze={class:"text-sm font-medium text-black font-semibold"},et=e("i",{class:"fa-solid fa-circle-check mr-2"},null,-1),tt={class:"list-disc pl-3"},st={key:0,style:{"font-size":"10px"},class:"text-xs mt-1"},ot={key:1,style:{"font-size":"10px"},class:"mb-2 text-xs mt-1"},lt={class:"flex items-center w-full mt-4"},at={class:"flex w-full items-center after:content-[''] after:w-full after:h-0.5 after:border-b after:border-gray-200 after:border-2 after:inline-block"},dt=e("i",{class:"fa-solid fa-handshake text-xs"},null,-1),nt=[dt],rt={class:"flex w-full items-center after:content-[''] after:w-full after:h-0.5 after:border-b after:border-gray-200 after:border-2 after:inline-block"},it=e("i",{class:"fa-solid fa-arrows-rotate text-xs"},null,-1),ct=[it],ut={class:"flex w-full items-center"},_t={class:"flex items-center w-full mt-2"},ft={class:"flex w-full items-center justify-left text-xs text-gray-500"},xt={key:0,class:"text-green-500"},ht={class:"w-full items-center justify-left text-xs text-gray-500"},Et={key:0,class:"text-green-500"},gt=e("br",null,null,-1),pt={class:"flex w-full items-center justify-left text-xs text-gray-500"},bt={key:0,class:"text-green-500"},mt={key:1,class:"text-red-500"},kt={__name:"InfoByRuta",props:{sv:String,ruta:String,clients:Array,negociados:Number,noNegociados:Number,gv:String,cuota:Number,pending:Number},setup(x){const c=x,h=f(""),n=f("todos"),i=f("");let v=f(!1),C=f(!1),N=f(!1);const A=()=>["DOMINGO","LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"][new Date().getDay()],T=()=>{v.value=!1},y=()=>{C.value=!0},D=()=>{C.value=!1},I=()=>{N.value=!0},S=()=>{N.value=!1},k=()=>{window.location.href=`/gestor/${c.ruta}/permutas`};F(()=>{i.value=A()});const U=p(()=>{let d=new Map;return c.clients.filter(t=>{const E=t.COD_CLIENTE.toLowerCase().includes(h.value.toLowerCase()),G=t.CLIENTE.toLowerCase().includes(h.value.toLowerCase()),M=t.FREC_VISITA.includes(i.value)||i.value==="";let g=!1;return(n.value==="todos"||n.value==="pendientes"&&t.NEGOCIADO==="PENDIENTE"||n.value==="negociados"&&t.NEGOCIADO==="NEGOCIADO")&&(g=!0),!d.has(t.COD_CLIENTE)&&(E||G)&&g&&M?(d.set(t.COD_CLIENTE,!0),!0):!1}).sort((t,E)=>t.NEGOCIADO==="PENDIENTE"&&E.NEGOCIADO!=="PENDIENTE"?-1:t.NEGOCIADO!=="PENDIENTE"&&E.NEGOCIADO==="PENDIENTE"?1:0)});p(()=>{let d=new Map,s=0;return c.clients.forEach(t=>{t.NEGOCIADO==="NEGOCIADO"&&(t.FREC_VISITA.includes(i.value)||i.value==="")&&!d.has(t.COD_CLIENTE)&&(d.set(t.COD_CLIENTE,!0),s++)}),s}),p(()=>{let d=new Map,s=0;return c.clients.forEach(t=>{t.NEGOCIADO==="PENDIENTE"&&(t.FREC_VISITA.includes(i.value)||i.value==="")&&!d.has(t.COD_CLIENTE)&&(d.set(t.COD_CLIENTE,!0),s++)}),s}),p(()=>{const d=c.clients.length,s=c.negociados,t=c.cuota;return console.log("NEGOCIADOS:"),console.log(s),console.log("COUTA:"),console.log(t),d>0?Math.round(s/t*100):0});const R=new Date().toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}).replace(/^\w/,d=>d.toUpperCase());return(d,s)=>(o(),b(B,{title:"Dashboard | EDF"},{header:O(()=>[e("div",H,[e("div",null,[e("p",Y,l(m(R)),1),e("h2",Q," ¡Hola, "+l(c.gv)+"! ",1)]),e("div",W,[w(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>i.value=t),class:"block w-full mt-1 border border-gray-100 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 font-bold"},le,512),[[L,i.value]]),e("button",{onClick:I,class:"relative"},ne)])])]),default:O(()=>[m(v)?(o(),b(z,{key:0,onClose:T,sv:x.sv,ruta:x.ruta},null,8,["sv","ruta"])):r("",!0),m(C)?(o(),b($,{key:1,onClose:D})):r("",!0),m(N)?(o(),b(J,{key:2,onClose:S})):r("",!0),e("div",re,[e("div",ie,[e("div",ce,[e("div",ue,[e("div",_e,[e("div",fe,[xe,he,e("p",Ee,l(x.negociados),1)]),e("div",ge,[pe,be,e("p",me,l(x.pending),1)])]),e("div",{class:"flex flex-row gap-4"},[e("button",{onClick:k,class:"bg-black text-white px-4 py-1 rounded-lg shadow-lg flex-1 font-bold"},[Ce,_("Permutas ")]),e("button",{onClick:y,class:"bg-white text-black border-2 border-black px-4 py-1 rounded-lg shadow-lg flex-1 font-bold"}," Ver catálogo EDF ")])])]),e("div",Ne,[ve,e("div",Oe,[w(e("input",{class:"border-2 border-gray-300 bg-white h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none w-full",type:"search",name:"search",placeholder:"Buscar","onUpdate:modelValue":s[1]||(s[1]=t=>h.value=t)},null,512),[[P,h.value]])]),e("div",we,[e("button",{class:u(["px-4 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":n.value==="todos","bg-white text-black":n.value!=="todos"}]),onClick:s[2]||(s[2]=t=>n.value="todos")},"Todos",2),e("button",{class:u(["px-4 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":n.value==="pendientes","bg-white text-black":n.value!=="pendientes"}]),onClick:s[3]||(s[3]=t=>n.value="pendientes")},"Pendientes",2),e("button",{class:u(["px-4 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":n.value==="negociados","bg-white text-black":n.value!=="negociados"}]),onClick:s[4]||(s[4]=t=>n.value="negociados")},"Negociados",2)])]),e("div",Ae,[e("div",Te,[(o(!0),a(j,null,V(U.value,t=>(o(),a("div",{class:u(["bg-white shadow-md rounded-lg overflow-hidden flex border-2",{"border-green-500":t.NEGOCIADO==="NEGOCIADO","border-transparent":t.NEGOCIADO!=="NEGOCIADO"}])},[e("div",ye,[e("div",De,[e("div",Ie,[Se,_(" "+l(t.COD_CLIENTE)+" - "+l(t.CLIENTE),1)]),e("div",ke,l(t.DIRECCION.charAt(0).toUpperCase()+t.DIRECCION.slice(1).toLowerCase()),1),e("div",Ue,[t.N_EDF==0?(o(),a("span",Re,[Ge,_(" No cuenta con EDF ")])):(o(),a("span",Me,[Fe,_(" Cuenta con "+l(t.N_EDF)+" EDF ",1)])),_(),Le,t.STATUS==="EN RUTA"||t.STATUS==="NEGOCIADO"?(o(),a("span",Pe,[Ve,t.dias_restantes>=0?(o(),a("span",je,[e("span",null," El EDF llega en "+l(t.dias_restantes)+" días ",1)])):(o(),a("span",Be," El EDF debió llegar hace "+l(Math.abs(t.dias_restantes))+" días ",1))])):r("",!0)])])]),t.NEGOCIADO=="PENDIENTE"?(o(),a("div",ze,[e("div",$e,[Je,e("ul",He,[e("li",Ye,"EDF - "+l(t.PUERTAS_A_NEGOCIAR)+" Puertas - "+l(t.CONDICION.charAt(0).toUpperCase()+t.CONDICION.slice(1).toLowerCase()),1),t.PUERTAS_A_NEGOCIAR_2?(o(),a("li",Qe,"EDF - "+l(t.PUERTAS_A_NEGOCIAR_2)+" Puertas - "+l(t.CONDICION_2.charAt(0).toUpperCase()+t.CONDICION_2.slice(1).toLowerCase()),1)):r("",!0)]),e("a",{href:"https://wa.link/ibba8o",target:"_blank",class:"ml-auto bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded-md"},[qe,_(" Negociar EDF ")],8,We)])])):(o(),a("div",Ke,[e("div",Xe,[e("div",Ze,[et,_("Has Negociado "),e("ul",tt,[t.PUERTAS_A_NEGOCIAR!=0?(o(),a("li",st,"EDF - "+l(t.PUERTAS_A_NEGOCIAR)+" Puertas - Repotenciado",1)):r("",!0),t.PUERTAS_A_NEGOCIAR_2&&t.PUERTAS_A_NEGOCIAR_2!=0?(o(),a("li",ot,"EDF - "+l(t.PUERTAS_A_NEGOCIAR_2)+" Puertas - Nuevo",1)):r("",!0)])]),e("ol",lt,[e("li",at,[e("span",{class:u(["flex items-center justify-center w-8 h-8 rounded-full lg:h-10 lg:w-10 shrink-0",t.STATUS==="NEGOCIADO"||t.STATUS==="EN RUTA"||t.STATUS==="ENTREGADO"||t.STATUS==="NO EFECTIVO"?"bg-green-500 text-white":"bg-gray-50 text-gray-300"])},nt,2)]),e("li",rt,[e("span",{class:u(["flex items-center justify-center w-8 h-8 rounded-full lg:h-10 lg:w-10 shrink-0",t.STATUS==="EN RUTA"||t.STATUS==="ENTREGADO"||t.STATUS==="NO EFECTIVO"?"bg-green-500 text-white":"bg-gray-50 text-gray-300"])},ct,2)]),e("li",ut,[e("span",{class:u(["flex items-center justify-center w-8 h-8 rounded-full lg:h-10 lg:w-10 shrink-0",t.STATUS==="ENTREGADO"?"bg-green-500 text-white":t.STATUS==="NO EFECTIVO"?"bg-red-500 text-white":"bg-gray-50 text-gray-300"])},[e("i",{class:u(t.STATUS==="NO EFECTIVO"?"fa-solid fa-xmark text-xs":"fa-solid fa-check text-xs")},null,2)],2)])]),e("div",_t,[e("div",ft,[t.STATUS==="NEGOCIADO"?(o(),a("span",xt,"Negociado")):r("",!0)]),e("div",ht,[t.STATUS==="EN RUTA"?(o(),a("span",Et,"En Ruta")):r("",!0),gt]),e("div",pt,[t.STATUS==="ENTREGADO"?(o(),a("span",bt,"Entregado")):r("",!0),t.STATUS==="NO EFECTIVO"?(o(),a("span",mt,"No efectiva")):r("",!0)])])])]))],2))),256))])])])])]),_:1}))}};export{kt as default};
