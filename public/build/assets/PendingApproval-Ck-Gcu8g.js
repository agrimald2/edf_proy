import{_ as c}from"./GuestLayout-CX8lae6Z.js";import p from"./PendingPermutaItem-f1AQ_R2_.js";import{s as m,i,o as a,c as d,w as h,a as t,e as f,h as g,F as _}from"./app-BM9k2gmy.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Banner-D7AhnTNv.js";import"./PermutaDetails-BVq2D5UD.js";import"./PermutaRejectReasonModal-sSnzrgSa.js";import"./PermutaApproveConfirmationModal-D-PhK2no.js";import"./PermutaApprovedModal-BJ2ejduK.js";import"./PermutaRejectedModal-CFv7XlnX.js";const x={components:{GuestLayout:c,PendingPermutaItem:p},props:{mesa:{type:String},haveAvailableLimit:{type:Boolean}},data(){return{todaysDate:new Date().toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}).replace(/^\w/,e=>e.toUpperCase()),selectedFilter:"todos",permutas:[],searchQuery:"",showDetailModal:!1,selectedPermuta:null,showAddPermutaModal:!1}},computed:{filteredPermutas(){return this.permutas.filter(e=>this.selectedFilter==="todos"?!0:this.selectedFilter==="approved"?e.trade_status.toLowerCase()==="approved":this.selectedFilter==="rejected"?e.trade_status.toLowerCase()==="rejected"||e.supervisor_status.toLowerCase()==="rejected"||e.gerente_status.toLowerCase()==="rejected":this.selectedFilter==="pending"?e.trade_status.toLowerCase()==="pending"&&e.supervisor_status.toLowerCase()!=="rejected"&&e.gerente_status.toLowerCase()!=="rejected":e.gerente_status.toLowerCase()===this.selectedFilter).filter(e=>e.cod_cliente.includes(this.searchQuery)||e.location.name.includes(this.searchQuery))},sortedPermutas(){return this.filteredPermutas.sort((e,s)=>e.supervisor_status==="Pending"&&s.supervisor_status!=="Pending"?-1:e.supervisor_status!=="Pending"&&s.supervisor_status==="Pending"?1:0)},approvedCount(){return this.permutas.filter(e=>e.trade_status.toLowerCase()==="approved").length},pendingCount(){return this.permutas.filter(e=>e.trade_status.toLowerCase()==="pending"&&e.supervisor_status.toLowerCase()!=="rejected"&&e.gerente_status.toLowerCase()!=="rejected").length}},methods:{async getPermutas(){try{const e=await m.get("/gerente/permutas/pending/list");this.permutas=e.data}catch(e){console.error("Error fetching permutas:",e)}},statusClass(e){switch(e.toLowerCase()){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},statusIcon(e){switch(e.toLowerCase()){case"approved":return"fa-solid fa-check";case"rejected":return"fa-solid fa-x";case"pending":return"fa-solid fa-spinner";default:return"fa-solid fa-question"}},openDetailModal(e){this.selectedPermuta=e,this.showDetailModal=!0},goBack(){window.location.href="/gerente/dashboard"}},mounted(){this.getPermutas()}},y={class:"flex items-center justify-between px-4 py-2 bg-white shadow-md border-b border-gray-200"},P=t("i",{class:"fa-solid fa-chevron-left font-bold"},null,-1),v=[P],C=t("h3",{class:"text-center text-sm font-bold text-gray-800 flex-1"},"Permutas por aprobar",-1),L=t("div",{class:"px-2 flex justify-between items-center my-4"},[t("h2",{class:"font-bold text-sm text-black leading-tight"}," Lista de Permutas ")],-1),b={class:"p-2 overflow-hidden shadow-xl sm:rounded-lg"},D={class:"flex flex-col gap-4"};function j(e,s,k,M,n,r){const l=i("PendingPermutaItem"),u=i("GuestLayout");return a(),d(u,{title:"Permutas | EDF"},{default:h(()=>[t("div",y,[t("button",{onClick:s[0]||(s[0]=o=>r.goBack()),class:"text-black text-sm hover:text-gray-800"},v),C]),L,t("div",b,[t("div",D,[(a(!0),f(_,null,g(r.sortedPermutas,o=>(a(),d(l,{key:o.id,permuta:o,showDetailModal:n.showDetailModal,selectedPermuta:n.selectedPermuta,onOpenDetailModal:r.openDetailModal},null,8,["permuta","showDetailModal","selectedPermuta","onOpenDetailModal"]))),128))])])]),_:1})}const N=w(x,[["render",j]]);export{N as default};
