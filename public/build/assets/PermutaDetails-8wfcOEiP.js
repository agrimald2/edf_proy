import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as n,e as i,a as t,t as o,f as r}from"./app-CagVXn9r.js";const u={props:{show:{type:Boolean,default:!1},permuta:{type:Object,required:!0},haveAvailableLimit:{type:Boolean,default:!0},sv:{type:String}},data(){return{formData:this.mapPermutaToFormData(this.permuta),reasons:[],sentPermutaViewModal:!1,errorMessage:"",isSubmitting:!1,showDetails:!0}},mounted(){this.fetchReasons()},methods:{mapPermutaToFormData(s){const a=["supervisor_status","gerente_status","trade_status"].find(c=>s[c].toLowerCase()==="rejected")||"Pending",d=["supervisor_rejected_reason","gerente_rejected_reason","trade_rejected_reason"].find(c=>s[c])||"";return{clientCode:s.cod_cliente,volumeCU:s.volume,location:s.location.name,route:s.route,subcanal:s.subcanal,haveEdf:s.have_edf,doorsToNegotiate:s.doors_to_negotiate,condition:s.condition,reason:s.reason,justification:s.justification,status:a==="Pending"?"Pending":"Rejected",rejectedReason:d}},fetchReasons(){fetch("/api/permuta-reasons").then(s=>s.json()).then(s=>{this.reasons=s}).catch(s=>{console.error("Error fetching reasons:",s)})},detailsModal(){this.showDetails=!0},closeModal(){this.$emit("close"),this.detailsModal()}}},f={class:"z-20 fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-2 overflow-y-auto"},p={class:"bg-white rounded-lg shadow-lg max-w-md w-full p-4 relative"},m=t("i",{class:"fa-solid fa-circle-xmark text-gray-500"},null,-1),g=[m],x={key:0},b=t("div",{class:"text-center mb-4"},[t("h2",{class:"text-xl font-bold"},"Detalles de Permuta"),t("p",{class:"text-gray-600 text-sm"},"Revisa la información de la permuta")],-1),v={key:0,class:"text-red-500 text-center mb-2 text-sm"},D={class:"space-y-2"},y={class:"px-2 rounded-lg"},j={class:"grid grid-cols-2 text-sm"},w=t("p",null,[t("span",{class:"font-bold"},"Código de cliente:")],-1),M={class:"text-right"},C=t("p",null,[t("span",{class:"font-bold"},"Fecha de Permuta:")],-1),k={class:"text-right"},P=t("p",null,[t("span",{class:"font-bold"},"Volumen en CU:")],-1),R={class:"text-right"},E=t("p",null,[t("span",{class:"font-bold"},"Locación:")],-1),S={class:"text-right"},B=t("p",null,[t("span",{class:"font-bold"},"Ruta:")],-1),F={class:"text-right"},L=t("p",null,[t("span",{class:"font-bold"},"Subcanal:")],-1),N={class:"text-right"},T={key:0},V=t("span",{class:"font-bold"},"Estado:",-1),U=[V],q={class:"text-right"},z={key:1},A=t("span",{class:"font-bold"},"Motivo:",-1),J=[A],O={class:"text-right"},G=t("hr",null,null,-1),H={class:"px-2 pb-1 rounded-lg"},I=t("h3",{class:"font-bold mb-1 text-red-700 text-sm"},"EDF a solicitar",-1),K={class:"grid grid-cols-2 text-sm"},Q=t("p",null,[t("span",{class:"font-bold"},"Condición:")],-1),W={class:"text-right"},X=t("p",null,[t("span",{class:"font-bold"},"Puertas a negociar:")],-1),Y={class:"text-right"},Z=t("p",null,[t("span",{class:"font-bold"},"Motivo:")],-1),$={class:"text-right"},tt=t("p",null,[t("span",{class:"font-bold"},"Justificación:")],-1),st={class:"text-right"},et={class:"mt-2 text-center"};function ot(s,a,d,c,e,l){return n(),i("div",f,[t("div",p,[t("button",{onClick:a[0]||(a[0]=(..._)=>l.closeModal&&l.closeModal(..._)),class:"absolute top-1 right-1 text-gray-500 hover:text-gray-700"},g),e.showDetails?(n(),i("div",x,[b,t("div",null,[e.errorMessage?(n(),i("div",v,o(e.errorMessage),1)):r("",!0),t("div",D,[t("div",y,[t("div",j,[w,t("p",M,o(e.formData.clientCode),1),C,t("p",k,o(new Date(d.permuta.created_at).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})),1),P,t("p",R,o(e.formData.volumeCU),1),E,t("p",S,o(e.formData.location),1),B,t("p",F,o(e.formData.route),1),L,t("p",N,o(e.formData.subcanal),1),e.formData.status==="Rejected"?(n(),i("p",T,U)):r("",!0),t("p",q,o(e.formData.status),1),e.formData.status==="Rejected"?(n(),i("p",z,J)):r("",!0),t("p",O,o(e.formData.rejectedReason),1)])]),G,t("div",H,[I,t("div",K,[Q,t("p",W,o(e.formData.condition),1),X,t("p",Y,o(e.formData.doorsToNegotiate),1),Z,t("p",$,o(e.formData.reason),1),tt,t("p",st,o(e.formData.justification),1)])])]),t("div",et,[t("button",{onClick:a[1]||(a[1]=(..._)=>l.closeModal&&l.closeModal(..._)),class:"w-full bg-black text-white px-2 py-1 rounded-lg hover:bg-red-600 focus:outline-none text-sm"},"Cerrar")])])])):r("",!0)])])}const it=h(u,[["render",ot]]);export{it as default};
