import g from"./PermutaRejectReasonModal-DMQmqXgj.js";import v from"./PermutaApproveConfirmationModal-DfeUK0Yr.js";import M from"./PermutaApprovedModal-Dkx_m4fJ.js";import w from"./PermutaRejectedModal-BRPg0JhV.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{l as c,o as n,e as u,a as e,t as a,f as i,c as m}from"./app-D4KluA6q.js";const x={components:{PermutaRejectReasonModal:g,PermutaApproveConfirmationModal:v,PermutaApprovedModal:M,PermutaRejectedModal:w},props:{show:{type:Boolean,default:!1},permuta:{type:Object,required:!0},haveAvailableLimit:{type:Boolean,default:!0},sv:{type:String}},data(){return{formData:{date:new Date(this.permuta.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),clientCode:this.permuta.cod_cliente,volumeCU:this.permuta.volume,location:this.permuta.location.name,route:this.permuta.route,subcanal:this.permuta.subcanal,haveEdf:this.permuta.have_edf,doorsToNegotiate:this.permuta.doors_to_negotiate,condition:this.permuta.condition,reason:this.permuta.reason,justification:this.permuta.justification},reasons:[],sentPermutaViewModal:!1,errorMessage:"",isSubmitting:!1,showDetails:!0,showRejectReasonModal:!1,showRejectedModal:!1,showApproveConfirmationModal:!1,showApprovedModal:!1}},mounted(){fetch("/api/permuta-reasons").then(d=>d.json()).then(d=>{this.reasons=d}).catch(d=>{console.error("Error fetching reasons:",d)})},methods:{approvePermuta(){this.showDetails=!1,this.showApproveConfirmationModal=!0},rejectPermuta(){this.showDetails=!1,this.showRejectReasonModal=!0},detailsModal(){console.log("A"),this.showDetails=!0,this.showRejectReasonModal=!1,this.showRejectedModal=!1,this.showApproveConfirmationModal=!1,this.showApprovedModal=!1},closeModal(){this.$emit("close"),this.detailsModal()}}},y={class:"z-20 fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-2 overflow-y-auto"},j={class:"bg-white rounded-lg shadow-lg max-w-md w-full p-4 relative"},D=e("i",{class:"fa-solid fa-circle-xmark text-gray-500"},null,-1),R=[D],C={key:0},P={class:"text-center mb-4"},A=e("h2",{class:"text-xl font-bold"},"Detalles de Permuta",-1),k={class:"text-gray-600 text-sm"},S={key:0,class:"text-red-500 text-center mb-2 text-sm"},B={class:"space-y-2"},E={class:"px-2 rounded-lg"},L={class:"grid grid-cols-2 text-sm"},N=e("p",null,[e("span",{class:"font-bold"},"C贸digo de cliente:")],-1),V={class:"text-right"},U=e("p",null,[e("span",{class:"font-bold"},"Fecha de Permuta:")],-1),z={class:"text-right"},F=e("p",null,[e("span",{class:"font-bold"},"Volumen en CU:")],-1),T={class:"text-right"},q=e("p",null,[e("span",{class:"font-bold"},"Locaci贸n:")],-1),J={class:"text-right"},O=e("p",null,[e("span",{class:"font-bold"},"Ruta:")],-1),G={class:"text-right"},H=e("p",null,[e("span",{class:"font-bold"},"Subcanal:")],-1),I={class:"text-right"},K=e("hr",null,null,-1),Q={class:"px-2 pb-1 rounded-lg"},W=e("h3",{class:"font-bold mb-1 text-red-700 text-sm"},"EDF a solicitar",-1),X={class:"grid grid-cols-2 text-sm"},Y=e("p",null,[e("span",{class:"font-bold"},"Condici贸n:")],-1),Z={class:"text-right"},$=e("p",null,[e("span",{class:"font-bold"},"Puertas a negociar:")],-1),ee={class:"text-right"},te=e("p",null,[e("span",{class:"font-bold"},"Motivo:")],-1),oe={class:"text-right"},se=e("p",null,[e("span",{class:"font-bold"},"Justificaci贸n:")],-1),ae={class:"text-right"},le={key:1,class:"mt-6 flex justify-between"},ne={class:"mt-2 text-center"};function re(d,o,r,ie,t,l){const p=c("PermutaRejectReasonModal"),h=c("PermutaRejectedModal"),f=c("PermutaApproveConfirmationModal"),_=c("PermutaApprovedModal");return n(),u("div",y,[e("div",j,[e("button",{onClick:o[0]||(o[0]=(...s)=>l.closeModal&&l.closeModal(...s)),class:"absolute top-1 right-1 text-gray-500 hover:text-gray-700"},R),t.showDetails?(n(),u("div",C,[e("div",P,[A,e("p",k,"Aprobado por: "+a(r.permuta.gerente_approved_by),1)]),e("div",null,[t.errorMessage?(n(),u("div",S,a(t.errorMessage),1)):i("",!0),e("div",B,[e("div",E,[e("div",L,[N,e("p",V,a(t.formData.clientCode),1),U,e("p",z,a(new Date(r.permuta.created_at).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})),1),F,e("p",T,a(t.formData.volumeCU),1),q,e("p",J,a(t.formData.location),1),O,e("p",G,a(t.formData.route),1),H,e("p",I,a(t.formData.subcanal),1)])]),K,e("div",Q,[W,e("div",X,[Y,e("p",Z,a(t.formData.condition),1),$,e("p",ee,a(t.formData.doorsToNegotiate),1),te,e("p",oe,a(t.formData.reason),1),se,e("p",ae,a(t.formData.justification),1)])])]),r.permuta.trade_status=="Pending"?(n(),u("div",le,[e("button",{onClick:o[1]||(o[1]=(...s)=>l.approvePermuta&&l.approvePermuta(...s)),class:"w-1/2 py-1 font-medium rounded-md bg-green-500 text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50 mr-2"}," Aprobar "),e("button",{onClick:o[2]||(o[2]=(...s)=>l.rejectPermuta&&l.rejectPermuta(...s)),class:"w-1/2 py-1 font-medium rounded-md bg-red-500 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-opacity-50 ml-2"}," Rechazar ")])):i("",!0),e("div",ne,[e("button",{onClick:o[3]||(o[3]=(...s)=>l.closeModal&&l.closeModal(...s)),class:"w-full bg-black text-white px-2 py-1 rounded-lg hover:bg-red-600 focus:outline-none text-sm"},"Cerrar")])])])):i("",!0),t.showRejectReasonModal?(n(),m(p,{key:1,"permuta-id":r.permuta.id,onShowDetailsModal:l.detailsModal,onShowRejectedModal:o[4]||(o[4]=s=>t.showRejectedModal=!0),onClose:o[5]||(o[5]=s=>t.showRejectReasonModal=!1)},null,8,["permuta-id","onShowDetailsModal"])):i("",!0),t.showRejectedModal?(n(),m(h,{key:2,"permuta-id":r.permuta.id,onClose:o[6]||(o[6]=s=>t.showRejectedModal=!1)},null,8,["permuta-id"])):i("",!0),t.showApproveConfirmationModal?(n(),m(f,{key:3,"permuta-id":r.permuta.id,onShowDetailsModal:l.detailsModal,onClose:o[7]||(o[7]=s=>t.showApproveConfirmationModal=!1),onShowApprovedModal:o[8]||(o[8]=s=>t.showApprovedModal=!0)},null,8,["permuta-id","onShowDetailsModal"])):i("",!0),t.showApprovedModal?(n(),m(_,{key:4,"permuta-id":r.permuta.id,onClose:o[9]||(o[9]=s=>t.showApprovedModal=!1)},null,8,["permuta-id"])):i("",!0)])])}const fe=b(x,[["render",re]]);export{fe as default};
