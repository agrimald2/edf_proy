import{_ as v}from"./GuestLayout-BcTKaatO.js";import b from"./PermutaDetails-C8SJSrH-.js";import{q as g,i as u,o as n,c as p,w as h,a as e,t as r,g as d,m as w,A as y,n as a,e as m,h as k,f as C,F}from"./app-BgME_OLw.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Banner-DzClHumN.js";import"./PermutaRejectReasonModal-B_Z8V1Zv.js";import"./PermutaApproveConfirmationModal-D4rJFoa9.js";import"./PermutaApprovedModal-Cj7S0-M3.js";import"./PermutaRejectedModal-Bhv4F8RH.js";const L={components:{GuestLayout:v,PermutaDetails:b},props:{mesa:{type:String},haveAvailableLimit:{type:Boolean}},data(){return{todaysDate:new Date().toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}).replace(/^\w/,t=>t.toUpperCase()),selectedFilter:"todos",permutas:[],searchQuery:"",showDetailModal:!1,selectedPermuta:null}},computed:{filteredPermutas(){return this.permutas.filter(t=>this.selectedFilter==="todos"||t.supervisor_status.toLowerCase()===this.selectedFilter).filter(t=>t.cod_cliente.includes(this.searchQuery)||t.location.name.includes(this.searchQuery))},approvedCount(){return this.permutas.filter(t=>t.supervisor_status.toLowerCase()==="approved").length},pendingCount(){return this.permutas.filter(t=>t.supervisor_status.toLowerCase()==="pending").length}},methods:{async getPermutas(){try{const t=await g.get(`/api/supervisor/${this.mesa}/permutas`);this.permutas=t.data}catch(t){console.error("Error fetching permutas:",t)}},statusClass(t){switch(t.toLowerCase()){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},statusIcon(t){switch(t.toLowerCase()){case"approved":return"fa-solid fa-check";case"rejected":return"fa-solid fa-x";case"pending":return"fa-solid fa-spinner";default:return"fa-solid fa-question"}},openDetailModal(t){this.selectedPermuta=t,this.showDetailModal=!0}},mounted(){this.getPermutas()}},P={class:"grid grid-cols-2 gap-4 items-center"},M={class:"font-bold text-sm text-black leading-tight"},j=e("p",{class:"text-sm"},"Supervisor ",-1),A=e("div",{class:"flex items-center",style:{"margin-left":"auto"}},[e("span",{class:"text-xs font-bold"},"Frecuencia:"),e("select",{style:{"padding-right":"2rem"},class:"block mt-1 border-none rounded focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 text-sm"},[e("option",{value:"lunes"},"Lunes"),e("option",{value:"martes"},"Martes"),e("option",{value:"miércoles"},"Miércoles"),e("option",{value:"jueves"},"Jueves"),e("option",{value:"viernes"},"Viernes"),e("option",{value:"sábado"},"Sábado"),e("option",{value:"domingo"},"Domingo")])],-1),B={class:"flex flex-col gap-4"},E={class:"bg-white shadow-md rounded-lg overflow-hidden flex"},S={class:"flex-1 border-r border-gray-200"},V={class:"p-4"},Q=e("div",{class:"text-sm font-semibold"},[e("i",{class:"fa-solid fa-check-circle text-green-500"}),d(" Aprobadas ")],-1),N={class:"text-xs pt-2 pl-4"},q=e("span",{class:"font-bold"}," Cantidad: ",-1),G={class:"flex-1 text-left"},R={class:"p-4 text-left"},T=e("div",{class:"text-sm text-black font-bold"},[e("i",{class:"fa-solid fa-clock text-yellow-500"}),d(" Restantes ")],-1),U={class:"text-xs mt-1 font-medium text-gray-500"},z={class:"px-2"},I={class:"relative mx-auto text-gray-600 w-full"},H=e("h2",{class:"font-bold text-sm text-black leading-tight pt-4 pb-2"}," Lista de Permutas ",-1),J={class:"flex gap-2 my-4 px-2"},K={class:"p-2 overflow-hidden shadow-xl sm:rounded-lg"},O={class:"flex flex-col gap-4"},W={class:"w-3/5 border-r border-gray-200"},X={class:"p-4"},Y={class:"text-sm font-semibold"},Z=e("i",{class:"fa-solid fa-user"},null,-1),$={class:"text-xs flex items-center justify-between"},ee={class:"bg-gray-100 rounded pt-1 pl-2 pb-1 pr-2 flex-3/4"},te=e("i",{class:"fa-brands fa-square-letterboxd mr-2"},null,-1),se={class:"flex-1/4 text-right"},oe={class:"mt-2"},le={class:"w-2/5 text-left"},re={class:"p-4 text-left"},ie={class:"text-sm text-black font-bold"},ae={class:"text-xs mt-1 font-medium text-gray-500"},de={class:"text-xs font-medium text-gray-500 mt-2"},ne=["onClick"];function ce(t,l,c,ue,s,i){const x=u("PermutaDetails"),f=u("GuestLayout");return n(),p(f,{title:"Permutas | EDF"},{header:h(()=>[e("div",P,[e("div",null,[e("h2",M," ¡Hola! "+r(c.mesa),1),j]),A])]),default:h(()=>[e("div",B,[e("div",E,[e("div",S,[e("div",V,[Q,e("div",N,[q,d(" "+r(i.approvedCount),1)])])]),e("div",G,[e("div",R,[T,e("div",U," Cantidad: "+r(i.pendingCount),1)])])])]),e("div",z,[e("div",I,[H,w(e("input",{class:"border-2 border-gray-300 bg-white h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none w-full",type:"search",name:"search",placeholder:"Buscar","onUpdate:modelValue":l[0]||(l[0]=o=>s.searchQuery=o)},null,512),[[y,s.searchQuery]])])]),e("div",J,[e("button",{class:a(["px-3 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":s.selectedFilter==="todos","bg-white text-black":s.selectedFilter!=="todos"}]),onClick:l[1]||(l[1]=o=>s.selectedFilter="todos")},"Todos",2),e("button",{class:a(["px-3 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":s.selectedFilter==="approved","bg-white text-black":s.selectedFilter!=="approved"}]),onClick:l[2]||(l[2]=o=>s.selectedFilter="approved")},"Aprobadas",2),e("button",{class:a(["px-3 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":s.selectedFilter==="rejected","bg-white text-black":s.selectedFilter!=="rejected"}]),onClick:l[3]||(l[3]=o=>s.selectedFilter="rejected")},"Rechazadas",2),e("button",{class:a(["px-3 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":s.selectedFilter==="pending","bg-white text-black":s.selectedFilter!=="pending"}]),onClick:l[4]||(l[4]=o=>s.selectedFilter="pending")},"Pendientes",2)]),e("div",K,[e("div",O,[(n(!0),m(F,null,k(i.filteredPermutas,o=>(n(),m("div",{key:o.id,class:"bg-white shadow-md rounded-lg overflow-hidden flex"},[e("div",W,[e("div",X,[e("div",Y,[Z,d(" "+r(o.cod_cliente)+" - "+r(o.location.name),1)]),e("div",$,[e("div",ee,[te,d(" "+r(o.have_edf?"Cuenta con EDF":"No cuenta con EDF"),1)]),e("div",se,r(o.volume)+" CU ",1)]),e("div",oe,[e("span",{class:a([i.statusClass(o.supervisor_status),"text-xs font-semibold mr-2 px-2.5 py-1 rounded"])},[e("i",{class:a(i.statusIcon(o.supervisor_status))},null,2),d(" "+r(o.supervisor_status),1)],2)])])]),e("div",le,[e("div",re,[e("div",ie,r(o.subcanal),1),e("div",ae," Ruta: "+r(o.route),1),e("div",de,[e("button",{class:"bg-red-500 text-white font-bold py-1 px-2 rounded-md w-full",onClick:_=>i.openDetailModal(o)},"Ver más",8,ne)]),s.showDetailModal?(n(),p(x,{key:0,show:s.showDetailModal,permuta:s.selectedPermuta,haveAvailableLimit:c.haveAvailableLimit,sv:c.mesa,onClose:l[5]||(l[5]=_=>s.showDetailModal=!1)},null,8,["show","permuta","haveAvailableLimit","sv"])):C("",!0)])])]))),128))])])]),_:1})}const we=D(L,[["render",ce]]);export{we as default};
