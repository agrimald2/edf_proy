import{_ as m}from"./GuestLayout-GLY6miUU.js";import y from"./PermutaDetails-DHAHji-1.js";import{s as _,i as u,o as n,c as f,w as x,a as e,g as a,e as h,t as d,f as g,k,v as C,n as l,h as P,F as j}from"./app-DKC19ebn.js";import A from"./AddPermutaModal-8rYkSeZM.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Banner-BL9Sh_o0.js";import"./PermutaSent-C_mjpxVI.js";const L={components:{GuestLayout:m,PermutaDetails:y,AddPermutaModal:A},props:["supervisor","route","sv","gv","location_id"],data(){return{todaysDate:new Date().toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}).replace(/^\w/,s=>s.toUpperCase()),selectedFilter:"todos",permutas:[],searchQuery:"",showDetailModal:!1,selectedPermuta:null,showAddPermutaModal:!1}},computed:{filteredPermutas(){return this.permutas.filter(s=>this.selectedFilter==="todos"?!0:this.selectedFilter==="rejected"?s.trade_status.toLowerCase()==="rejected"||s.supervisor_status.toLowerCase()==="rejected"||s.gerente_status.toLowerCase()==="rejected":this.selectedFilter==="pending"?s.trade_status.toLowerCase()==="pending"&&s.supervisor_status.toLowerCase()!=="rejected"&&s.gerente_status.toLowerCase()!=="rejected":s.trade_status.toLowerCase()===this.selectedFilter).filter(s=>s.cod_cliente.includes(this.searchQuery)||s.location.name.includes(this.searchQuery))},approvedCount(){return this.permutas.filter(s=>s.trade_status.toLowerCase()==="approved").length},pendingCount(){return this.permutas.filter(s=>s.trade_status.toLowerCase()==="pending"&&s.supervisor_status.toLowerCase()!=="rejected"&&s.gerente_status.toLowerCase()!=="rejected").length}},methods:{async getPermutas(){try{const s=await _.get(`/api/gestor/${this.route}/permutas`);this.permutas=s.data}catch(s){console.error("Error fetching permutas:",s)}},statusClass(s){switch(s.toLowerCase()){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},statusIcon(s){switch(s.toLowerCase()){case"approved":return"fa-solid fa-check";case"rejected":return"fa-solid fa-x";case"pending":return"fa-solid fa-spinner";default:return"fa-solid fa-question"}},openDetailModal(s){this.selectedPermuta=s,this.showDetailModal=!0},logout(){_.post("/logout").then(s=>{window.location.href="/login"}).catch(s=>{console.error("Error during logout:",s)})},openAddPermutaModal(){this.showAddPermutaModal=!0},closeAddPermutaModal(){this.showAddPermutaModal=!1}},mounted(){this.getPermutas()}},M={class:"grid grid-cols-2 gap-4 items-center"},D=e("h2",{class:"font-bold text-sm text-black leading-tight"}," Â¡Hola! ",-1),R={key:0,class:"text-sm"},B={class:"flex flex-col gap-4"},E={class:"bg-white shadow-md rounded-lg overflow-hidden flex"},G={class:"flex-1 border-r border-gray-200"},Q={class:"p-4"},V=e("div",{class:"text-sm font-semibold"},[e("i",{class:"fa-solid fa-check-circle text-green-500"}),a(" Aprobadas ")],-1),N={class:"text-xs pt-2 pl-4"},S=e("span",{class:"font-bold"}," Cantidad: ",-1),T={class:"flex-1 text-left"},U={class:"p-4 text-left"},q=e("div",{class:"text-sm text-black font-bold"},[e("i",{class:"fa-solid fa-clock text-yellow-500"}),a(" Pendientes ")],-1),z={class:"text-xs mt-1 font-medium text-gray-500"},I={class:"px-2 my-2"},H=e("i",{class:"fa-solid fa-plus mr-2"},null,-1),J={class:"px-2"},K={class:"relative mx-auto text-gray-600 w-full"},O=e("h2",{class:"font-bold text-sm text-black leading-tight pt-4 pb-2"}," Lista de Permutas ",-1),W={class:"flex gap-2 my-4 px-2"},X={class:"p-2 overflow-hidden shadow-xl sm:rounded-lg"},Y={class:"flex flex-col gap-4"},Z={class:"w-3/5 border-r border-gray-200"},$={class:"p-4"},ee={class:"text-sm font-semibold"},te=e("i",{class:"fa-solid fa-user"},null,-1),se={class:"text-xs flex items-center justify-between"},oe={class:"bg-gray-100 rounded pt-1 pl-1 pb-1 pr-2 flex-3/4"},re=e("i",{class:"fa-brands fa-square-letterboxd"},null,-1),le={class:"flex items-center mt-2 pl-2"},de={class:"flex flex-col items-center"},ie={class:"flex flex-col items-center"},ae={class:"flex flex-col items-center"},ne=e("div",{class:"flex justify-between mt-2"},[e("div",{class:"text-xs font-medium text-gray-500"},"Supervisor"),e("div",{class:"text-xs font-medium text-gray-500 pr-5"},"Gerente"),e("div",{class:"text-xs font-medium text-gray-500"},"Trade")],-1),ce={class:"w-2/5 text-left"},ue={class:"pb-2 px-4 text-left pt-2"},fe={class:"text-sm text-black font-bold"},he={class:"text-xs mt-1 font-medium text-gray-500"},ge={class:"text-xs font-medium text-gray-500 mt-4"},_e=["onClick"];function xe(s,r,c,ve,o,i){const v=u("AddPermutaModal"),p=u("PermutaDetails"),b=u("GuestLayout");return n(),f(b,{title:"Permutas | EDF"},{header:x(()=>[e("div",M,[e("div",null,[D,e("p",null,[a("Gestor "),c.gv!=="N/A"?(n(),h("span",R,d(c.gv),1)):g("",!0)])])])]),default:x(()=>[o.showAddPermutaModal?(n(),f(v,{key:0,onClose:i.closeAddPermutaModal,sv:c.sv,ruta:c.route,location_id:c.location_id},null,8,["onClose","sv","ruta","location_id"])):g("",!0),e("div",B,[e("div",E,[e("div",G,[e("div",Q,[V,e("div",N,[S,a(" "+d(i.approvedCount),1)])])]),e("div",T,[e("div",U,[q,e("div",z," Cantidad: "+d(i.pendingCount),1)])])])]),e("div",I,[e("button",{onClick:r[0]||(r[0]=(...t)=>i.openAddPermutaModal&&i.openAddPermutaModal(...t)),class:"bg-black text-white px-4 py-1 rounded-lg shadow-lg flex-1 font-bold"},[H,a("Ingresar permuta ")])]),e("div",J,[e("div",K,[O,k(e("input",{class:"border-2 border-gray-300 bg-white h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none w-full",type:"search",name:"search",placeholder:"Buscar","onUpdate:modelValue":r[1]||(r[1]=t=>o.searchQuery=t)},null,512),[[C,o.searchQuery]])])]),e("div",W,[e("button",{class:l(["px-3 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":o.selectedFilter==="todos","bg-white text-black":o.selectedFilter!=="todos"}]),onClick:r[2]||(r[2]=t=>o.selectedFilter="todos")},"Todos",2),e("button",{class:l(["px-3 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":o.selectedFilter==="approved","bg-white text-black":o.selectedFilter!=="approved"}]),onClick:r[3]||(r[3]=t=>o.selectedFilter="approved")},"Aprobadas",2),e("button",{class:l(["px-3 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":o.selectedFilter==="rejected","bg-white text-black":o.selectedFilter!=="rejected"}]),onClick:r[4]||(r[4]=t=>o.selectedFilter="rejected")},"Rechazadas",2),e("button",{class:l(["px-3 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":o.selectedFilter==="pending","bg-white text-black":o.selectedFilter!=="pending"}]),onClick:r[5]||(r[5]=t=>o.selectedFilter="pending")},"Pendientes",2)]),e("div",X,[e("div",Y,[(n(!0),h(j,null,P(i.filteredPermutas,t=>(n(),h("div",{key:t.id,class:"bg-white shadow-md rounded-lg overflow-hidden flex flex-row"},[e("div",Z,[e("div",$,[e("div",ee,[te,a(" "+d(t.cod_cliente)+" - "+d(t.location.name),1)]),e("div",se,[e("div",oe,[re,a(" "+d(t.volume)+" CU ",1)])]),e("div",le,[e("div",de,[e("div",{class:l({"w-8 h-8 flex items-center justify-center rounded-full bg-green-500":t.supervisor_status==="Approved","w-8 h-8 flex items-center justify-center rounded-full bg-red-500":t.supervisor_status==="Rejected","w-8 h-8 flex items-center justify-center rounded-full bg-gray-300":t.supervisor_status==="Pending"})},[e("i",{class:l({"fa-solid fa-check text-white":t.supervisor_status==="Approved","fa-solid fa-times text-white":t.supervisor_status==="Rejected","fa-solid fa-clock text-gray-400":t.supervisor_status==="Pending"})},null,2)],2)]),e("div",{class:l({"h-1 w-16 bg-green-500":t.supervisor_status==="Approved","h-1 w-16 bg-red-500":t.supervisor_status==="Rejected","h-1 w-16 bg-gray-300":t.supervisor_status==="Pending"})},null,2),e("div",ie,[e("div",{class:l({"w-8 h-8 flex items-center justify-center rounded-full bg-green-500":t.gerente_status==="Approved","w-8 h-8 flex items-center justify-center rounded-full bg-red-500":t.gerente_status==="Rejected","w-8 h-8 flex items-center justify-center rounded-full bg-gray-300":t.gerente_status==="Pending"})},[e("i",{class:l({"fa-solid fa-check text-white":t.gerente_status==="Approved","fa-solid fa-times text-white":t.gerente_status==="Rejected","fa-solid fa-clock text-gray-400":t.gerente_status==="Pending"})},null,2)],2)]),e("div",{class:l({"h-1 w-16 bg-green-500":t.gerente_status==="Approved","h-1 w-16 bg-red-500":t.gerente_status==="Rejected","h-1 w-16 bg-gray-300":t.gerente_status==="Pending"})},null,2),e("div",ae,[e("div",{class:l({"w-8 h-8 flex items-center justify-center rounded-full bg-green-500":t.trade_status==="Approved","w-8 h-8 flex items-center justify-center rounded-full bg-red-500":t.trade_status==="Rejected","w-8 h-8 flex items-center justify-center rounded-full bg-gray-300":t.trade_status==="Pending"})},[e("i",{class:l({"fa-solid fa-check text-white":t.trade_status==="Approved","fa-solid fa-times text-white":t.trade_status==="Rejected","fa-solid fa-clock text-gray-400":t.trade_status==="Pending"})},null,2)],2)])]),ne])]),e("div",ce,[e("div",ue,[e("div",fe," Ruta: "+d(t.route),1),e("div",he,d(t.condition)+" - "+d(t.doors_to_negotiate)+" "+d(t.doors_to_negotiate===1?"Puerta":"Puertas"),1),e("div",ge,[e("button",{class:"bg-red-500 text-white font-bold py-1 px-2 rounded-md w-full",onClick:w=>i.openDetailModal(t)},"Ver Detalles",8,_e)]),o.showDetailModal?(n(),f(p,{key:0,show:o.showDetailModal,permuta:o.selectedPermuta,onClose:r[6]||(r[6]=w=>o.showDetailModal=!1)},null,8,["show","permuta"])):g("",!0)])])]))),128))])])]),_:1})}const Pe=F(L,[["render",xe]]);export{Pe as default};
