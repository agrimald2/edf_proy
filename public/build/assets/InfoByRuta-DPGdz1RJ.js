import{d as x,z as S,m as p,o,c as m,w,a as e,t as l,u as C,f as n,g as c,k as R,v as G,n as u,e as a,h as U,F as P}from"./app-BHd6Gmi0.js";import{_ as L}from"./GuestLayout-BGiasDA4.js";import F from"./AddPermutaModal-DKczWpOD.js";import M from"./CatalogoModal-DNQRWkUX.js";import"./Banner-DVXbS_Un.js";import"./PermutaSent-B6-h3u2Q.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EdfTypesCarrousel-CdI3Y3k6.js";import"./CondicionesCarrousel-CHnt5Ffq.js";const j={class:"grid grid-cols-2 gap-4 items-center"},z={class:"text-sm"},V={class:"font-bold text-sm text-black leading-tight"},B=e("div",null,null,-1),$={class:"py-6"},H={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Y={class:"overflow-hidden p-4"},Q={class:"flex flex-col gap-4"},q={class:"flex flex-row gap-4 w-3/4"},J={class:"bg-green-600 rounded-lg flex-1 flex flex-col p-4"},K=e("div",{class:"flex items-center justify-between w-full mb-2"},[e("i",{class:"fa-solid fa-users text-white text-3xl"})],-1),W=e("h3",{class:"text-md text-white"},"Clientes negociados",-1),X={class:"text-white text-3xl font-bold text-left w-full"},Z={class:"bg-red-600 rounded-lg flex-1 flex flex-col p-4"},ee=e("div",{class:"flex items-center justify-start w-full mb-2"},[e("i",{class:"fa-solid fa-users text-white text-3xl"})],-1),te=e("h3",{class:"text-md text-white text-left"},"Clientes pendientes",-1),se={class:"text-white text-3xl font-bold text-left"},oe=e("i",{class:"fa-solid fa-eye mr-2"},null,-1),le={class:"px-2"},ae=e("h1",{class:"p-2 font-bold"}," Lista de oportunidad Clientes ",-1),de={class:"pt-2 relative mx-auto text-gray-600 w-full"},re={class:"flex gap-2 my-4"},ne={class:"p-2 overflow-hidden shadow-xl sm:rounded-lg"},ie={class:"flex flex-col gap-4"},ce={class:"flex-1 border-r border-gray-200"},ue={class:"p-4"},_e={style:{"font-size":"10px"},class:"text-sm font-semibold"},fe=e("i",{class:"fa-solid fa-user"},null,-1),xe={style:{"font-size":"10px"},class:"text-sm"},he={class:"mt-2"},Ee={key:0,class:"bg-red-100 text-red-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-red-200 dark:text-red-900"},ge=e("i",{class:"fa-solid fa-fax"},null,-1),pe={key:1,class:"bg-yellow-100 text-yellow-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-yellow-200 dark:text-yellow-900"},be=e("i",{class:"fa-solid fa-fax"},null,-1),me=e("br",null,null,-1),Ce={key:2,class:"text-green-600 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-red-200 dark:text-red-900"},Ne=e("i",{class:"fa-solid fa-calendar-days"},null,-1),we={key:0},ve={key:1,class:"text-red-600"},Ae={key:0,class:"flex-1 text-left"},ye={class:"p-4 text-left"},Oe=e("div",{class:"text-sm text-black font-bold"},"Puedes negociar",-1),De={class:"list-disc pl-3"},Ie={style:{"font-size":"10px"},class:"text-xs mt-1"},Te={key:0,style:{"font-size":"10px"},class:"mb-2 text-xs mt-1"},ke=["href"],Se=e("i",{class:"fa-brands fa-whatsapp"},null,-1),Re={key:1,class:"flex-1 text-left"},Ge={class:"p-4 text-left"},Ue={class:"text-sm font-medium text-black font-semibold"},Pe=e("i",{class:"fa-solid fa-circle-check mr-2"},null,-1),Le={class:"list-disc pl-3"},Fe={key:0,style:{"font-size":"10px"},class:"text-xs mt-1"},Me={key:1,style:{"font-size":"10px"},class:"mb-2 text-xs mt-1"},je={class:"flex items-center w-full mt-4"},ze={class:"flex w-full items-center after:content-[''] after:w-full after:h-0.5 after:border-b after:border-gray-200 after:border-2 after:inline-block"},Ve=e("i",{class:"fa-solid fa-handshake text-xs"},null,-1),Be=[Ve],$e={class:"flex w-full items-center after:content-[''] after:w-full after:h-0.5 after:border-b after:border-gray-200 after:border-2 after:inline-block"},He=e("i",{class:"fa-solid fa-arrows-rotate text-xs"},null,-1),Ye=[He],Qe={class:"flex w-full items-center"},qe=e("i",{class:"fa-solid fa-check text-xs"},null,-1),Je=[qe],Ke={class:"flex items-center w-full mt-2"},We={class:"flex w-full items-center justify-left text-xs text-gray-500"},Xe={key:0,class:"text-green-500"},Ze={class:"w-full items-center justify-left text-xs text-gray-500"},et={key:0,class:"text-green-500"},tt=e("br",null,null,-1),st={class:"flex w-full items-center justify-left text-xs text-gray-500"},ot={key:0,class:"text-green-500"},xt={__name:"InfoByRuta",props:{sv:String,ruta:String,clients:Array,negociados:Number,noNegociados:Number,gv:String,cuota:Number,pending:Number},setup(f){const i=f,h=x(""),r=x("todos"),_=x("");let N=x(!1),b=x(!1);const v=()=>{N.value=!1},A=()=>{b.value=!0},y=()=>{b.value=!1},O=()=>{window.location.href=`/gestor/${i.ruta}/permutas`};S(()=>{});const D=p(()=>{let d=new Map;return i.clients.filter(t=>{const E=t.COD_CLIENTE.toLowerCase().includes(h.value.toLowerCase()),T=t.CLIENTE.toLowerCase().includes(h.value.toLowerCase()),k=t.FREC_VISITA.includes(_.value)||_.value==="";let g=!1;return(r.value==="todos"||r.value==="pendientes"&&t.NEGOCIADO==="PENDIENTE"||r.value==="negociados"&&t.NEGOCIADO==="NEGOCIADO")&&(g=!0),!d.has(t.COD_CLIENTE)&&(E||T)&&g&&k?(d.set(t.COD_CLIENTE,!0),!0):!1}).sort((t,E)=>t.NEGOCIADO==="PENDIENTE"&&E.NEGOCIADO!=="PENDIENTE"?-1:t.NEGOCIADO!=="PENDIENTE"&&E.NEGOCIADO==="PENDIENTE"?1:0)});p(()=>{let d=new Map,s=0;return i.clients.forEach(t=>{t.NEGOCIADO==="NEGOCIADO"&&(t.FREC_VISITA.includes(_.value)||_.value==="")&&!d.has(t.COD_CLIENTE)&&(d.set(t.COD_CLIENTE,!0),s++)}),s}),p(()=>{let d=new Map,s=0;return i.clients.forEach(t=>{t.NEGOCIADO==="PENDIENTE"&&(t.FREC_VISITA.includes(_.value)||_.value==="")&&!d.has(t.COD_CLIENTE)&&(d.set(t.COD_CLIENTE,!0),s++)}),s}),p(()=>{const d=i.clients.length,s=i.negociados,t=i.cuota;return console.log("NEGOCIADOS:"),console.log(s),console.log("COUTA:"),console.log(t),d>0?Math.round(s/t*100):0});const I=new Date().toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}).replace(/^\w/,d=>d.toUpperCase());return(d,s)=>(o(),m(L,{title:"Dashboard | EDF"},{header:w(()=>[e("div",j,[e("div",null,[e("p",z,l(C(I)),1),e("h2",V," ¡Hola, "+l(i.gv)+"! ",1)]),B])]),default:w(()=>[C(N)?(o(),m(F,{key:0,onClose:v,sv:f.sv,ruta:f.ruta},null,8,["sv","ruta"])):n("",!0),C(b)?(o(),m(M,{key:1,onClose:y})):n("",!0),e("div",$,[e("div",H,[e("div",Y,[e("div",Q,[e("div",q,[e("div",J,[K,W,e("p",X,l(f.negociados),1)]),e("div",Z,[ee,te,e("p",se,l(f.pending),1)])]),e("div",{class:"flex flex-row gap-4"},[e("button",{onClick:O,class:"bg-black text-white px-4 py-1 rounded-lg shadow-lg flex-1 font-bold"},[oe,c("Permutas ")]),e("button",{onClick:A,class:"bg-white text-black border-2 border-black px-4 py-1 rounded-lg shadow-lg flex-1 font-bold"}," Ver catálogo EDF ")])])]),e("div",le,[ae,e("div",de,[R(e("input",{class:"border-2 border-gray-300 bg-white h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none w-full",type:"search",name:"search",placeholder:"Buscar","onUpdate:modelValue":s[0]||(s[0]=t=>h.value=t)},null,512),[[G,h.value]])]),e("div",re,[e("button",{class:u(["px-4 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":r.value==="todos","bg-white text-black":r.value!=="todos"}]),onClick:s[1]||(s[1]=t=>r.value="todos")},"Todos",2),e("button",{class:u(["px-4 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":r.value==="pendientes","bg-white text-black":r.value!=="pendientes"}]),onClick:s[2]||(s[2]=t=>r.value="pendientes")},"Pendientes",2),e("button",{class:u(["px-4 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":r.value==="negociados","bg-white text-black":r.value!=="negociados"}]),onClick:s[3]||(s[3]=t=>r.value="negociados")},"Negociados",2)])]),e("div",ne,[e("div",ie,[(o(!0),a(P,null,U(D.value,t=>(o(),a("div",{class:u(["bg-white shadow-md rounded-lg overflow-hidden flex border-2",{"border-green-500":t.NEGOCIADO==="NEGOCIADO","border-transparent":t.NEGOCIADO!=="NEGOCIADO"}])},[e("div",ce,[e("div",ue,[e("div",_e,[fe,c(" "+l(t.COD_CLIENTE)+" - "+l(t.CLIENTE),1)]),e("div",xe,l(t.DIRECCION.charAt(0).toUpperCase()+t.DIRECCION.slice(1).toLowerCase()),1),e("div",he,[t.N_EDF==0?(o(),a("span",Ee,[ge,c(" No cuenta con EDF ")])):(o(),a("span",pe,[be,c(" Cuenta con "+l(t.N_EDF)+" EDF ",1)])),c(),me,t.STATUS==="EN RUTA"||t.STATUS==="NEGOCIADO"?(o(),a("span",Ce,[Ne,t.dias_restantes>=0?(o(),a("span",we,[e("span",null," El EDF llega en "+l(t.dias_restantes)+" días ",1)])):(o(),a("span",ve," El EDF debió llegar hace "+l(Math.abs(t.dias_restantes))+" días ",1))])):n("",!0)])])]),t.NEGOCIADO=="PENDIENTE"?(o(),a("div",Ae,[e("div",ye,[Oe,e("ul",De,[e("li",Ie,"EDF - "+l(t.PUERTAS_A_NEGOCIAR)+" Puertas - "+l(t.CONDICION.charAt(0).toUpperCase()+t.CONDICION.slice(1).toLowerCase()),1),t.PUERTAS_A_NEGOCIAR_2?(o(),a("li",Te,"EDF - "+l(t.PUERTAS_A_NEGOCIAR_2)+" Puertas - "+l(t.CONDICION.charAt(0).toUpperCase()+t.CONDICION_2.slice(1).toLowerCase()),1)):n("",!0)]),e("a",{href:"https://wa.link/ibba8o",target:"_blank",class:"ml-auto bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded-md"},[Se,c(" Negociar EDF ")],8,ke)])])):(o(),a("div",Re,[e("div",Ge,[e("div",Ue,[Pe,c("Has Negociado "),e("ul",Le,[t.PUERTAS_A_NEGOCIAR!=0?(o(),a("li",Fe,"EDF - "+l(t.PUERTAS_A_NEGOCIAR)+" Puertas - Repotenciado",1)):n("",!0),t.PUERTAS_A_NEGOCIAR_2&&t.PUERTAS_A_NEGOCIAR_2!=0?(o(),a("li",Me,"EDF - "+l(t.PUERTAS_A_NEGOCIAR_2)+" Puertas - Nuevo",1)):n("",!0)])]),e("ol",je,[e("li",ze,[e("span",{class:u(["flex items-center justify-center w-8 h-8 rounded-full lg:h-10 lg:w-10 shrink-0",t.STATUS==="NEGOCIADO"||t.STATUS==="EN RUTA"||t.STATUS==="ENTREGADO"?"bg-green-500 text-white":"bg-gray-50 text-gray-300"])},Be,2)]),e("li",$e,[e("span",{class:u(["flex items-center justify-center w-8 h-8 rounded-full lg:h-10 lg:w-10 shrink-0",t.STATUS==="EN RUTA"||t.STATUS==="ENTREGADO"?"bg-green-500 text-white":"bg-gray-50 text-gray-300"])},Ye,2)]),e("li",Qe,[e("span",{class:u(["flex items-center justify-center w-8 h-8 rounded-full lg:h-10 lg:w-10 shrink-0",t.STATUS==="ENTREGADO"?"bg-green-500 text-white":"bg-gray-50 text-gray-300"])},Je,2)])]),e("div",Ke,[e("div",We,[t.STATUS==="NEGOCIADO"?(o(),a("span",Xe,"Negociado")):n("",!0)]),e("div",Ze,[t.STATUS==="EN RUTA"?(o(),a("span",et,"En Ruta")):n("",!0),tt]),e("div",st,[t.STATUS==="ENTREGADO"?(o(),a("span",ot,"Entregado")):n("",!0)])])])]))],2))),256))])])])])]),_:1}))}};export{xt as default};
