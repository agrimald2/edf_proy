import{_ as b}from"./GuestLayout-BbJ57Dyj.js";import g from"./PermutaDetails-Ae-5PMEv.js";import{s as c,i as u,o as n,c as h,w as p,a as e,g as i,t as r,k as v,v as w,n as d,e as x,h as y,f as k,F as C}from"./app-CdoPr1dZ.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Banner-Cg02jEoR.js";import"./PermutaRejectReasonModal-Cb6ZQjSx.js";import"./PermutaApproveConfirmationModal-BENuVmZS.js";import"./PermutaApprovedModal-BQHQgvBa.js";import"./PermutaRejectedModal-f1B8ZQpG.js";const D={components:{GuestLayout:b,PermutaDetails:g},props:["supervisor"],data(){return{todaysDate:new Date().toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}).replace(/^\w/,t=>t.toUpperCase()),selectedFilter:"todos",permutas:[],searchQuery:"",showDetailModal:!1,selectedPermuta:null}},computed:{filteredPermutas(){return this.permutas.filter(t=>this.selectedFilter==="todos"||t.trade_status.toLowerCase()===this.selectedFilter).filter(t=>t.cod_cliente.includes(this.searchQuery)||t.location.name.includes(this.searchQuery))},approvedCount(){return this.permutas.filter(t=>t.trade_status.toLowerCase()==="approved").length},pendingCount(){return this.permutas.filter(t=>t.trade_status.toLowerCase()==="pending").length}},methods:{async getPermutas(){try{const t=await c.get("/api/trade/permutas");this.permutas=t.data}catch(t){console.error("Error fetching permutas:",t)}},statusClass(t){switch(t.toLowerCase()){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},statusIcon(t){switch(t.toLowerCase()){case"approved":return"fa-solid fa-check";case"rejected":return"fa-solid fa-x";case"pending":return"fa-solid fa-spinner";default:return"fa-solid fa-question"}},openDetailModal(t){this.selectedPermuta=t,this.showDetailModal=!0},logout(){c.post("/logout").then(t=>{window.location.href="/login"}).catch(t=>{console.error("Error during logout:",t)})}},mounted(){this.getPermutas()}},P=e("div",{class:"grid grid-cols-2 gap-4 items-center"},[e("div",null,[e("h2",{class:"font-bold text-sm text-black leading-tight"}," ¡Hola, Carla Estrada! "),e("p",{class:"text-sm"},"Trade")])],-1),L={class:"flex flex-col gap-4"},E={class:"bg-white shadow-md rounded-lg overflow-hidden flex"},M={class:"flex-1 border-r border-gray-200"},j={class:"p-4"},B=e("div",{class:"text-sm font-semibold"},[e("i",{class:"fa-solid fa-check-circle text-green-500"}),i(" Aprobadas ")],-1),Q={class:"text-xs pt-2 pl-4"},R=e("span",{class:"font-bold"}," Cantidad: ",-1),V={class:"flex-1 text-left"},A={class:"p-4 text-left"},N=e("div",{class:"text-sm text-black font-bold"},[e("i",{class:"fa-solid fa-clock text-yellow-500"}),i(" Restantes ")],-1),T={class:"text-xs mt-1 font-medium text-gray-500"},z={class:"px-2"},G={class:"relative mx-auto text-gray-600 w-full"},S=e("h2",{class:"font-bold text-sm text-black leading-tight pt-4 pb-2"}," Lista de Permutas ",-1),U={class:"flex gap-2 my-4 px-2"},q={class:"p-2 overflow-hidden shadow-xl sm:rounded-lg"},I={class:"flex flex-col gap-4"},H={class:"w-3/5 border-r border-gray-200"},J={class:"p-4"},K={class:"text-sm font-semibold"},O=e("i",{class:"fa-solid fa-user"},null,-1),W={class:"text-xs flex items-center justify-between"},X={class:"bg-gray-100 rounded pt-1 pl-2 pb-1 pr-2 flex-3/4"},Y=e("i",{class:"fa-brands fa-square-letterboxd mr-2"},null,-1),Z={class:"flex-1/4 text-right"},$={class:"mt-2"},ee={class:"w-2/5 text-left"},te={class:"p-4 text-left"},se={class:"text-sm text-black font-bold"},oe={class:"text-xs mt-1 font-medium text-gray-500"},le={class:"text-xs font-medium text-gray-500 mt-2"},re=["onClick"];function ae(t,l,de,ie,o,a){const _=u("PermutaDetails"),f=u("GuestLayout");return n(),h(f,{title:"Permutas | EDF"},{header:p(()=>[P]),default:p(()=>[e("div",L,[e("div",E,[e("div",M,[e("div",j,[B,e("div",Q,[R,i(" "+r(a.approvedCount),1)])])]),e("div",V,[e("div",A,[N,e("div",T," Cantidad: "+r(a.pendingCount),1)])])])]),e("div",z,[e("div",G,[S,v(e("input",{class:"border-2 border-gray-300 bg-white h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none w-full",type:"search",name:"search",placeholder:"Buscar","onUpdate:modelValue":l[0]||(l[0]=s=>o.searchQuery=s)},null,512),[[w,o.searchQuery]])])]),e("div",U,[e("button",{class:d(["px-3 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":o.selectedFilter==="todos","bg-white text-black":o.selectedFilter!=="todos"}]),onClick:l[1]||(l[1]=s=>o.selectedFilter="todos")},"Todos",2),e("button",{class:d(["px-3 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":o.selectedFilter==="approved","bg-white text-black":o.selectedFilter!=="approved"}]),onClick:l[2]||(l[2]=s=>o.selectedFilter="approved")},"Aprobadas",2),e("button",{class:d(["px-3 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":o.selectedFilter==="rejected","bg-white text-black":o.selectedFilter!=="rejected"}]),onClick:l[3]||(l[3]=s=>o.selectedFilter="rejected")},"Rechazadas",2),e("button",{class:d(["px-3 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":o.selectedFilter==="pending","bg-white text-black":o.selectedFilter!=="pending"}]),onClick:l[4]||(l[4]=s=>o.selectedFilter="pending")},"Pendientes",2)]),e("div",q,[e("div",I,[(n(!0),x(C,null,y(a.filteredPermutas,s=>(n(),x("div",{key:s.id,class:"bg-white shadow-md rounded-lg overflow-hidden flex"},[e("div",H,[e("div",J,[e("div",K,[O,i(" "+r(s.cod_cliente)+" - "+r(s.location.name),1)]),e("div",W,[e("div",X,[Y,i(" "+r(s.have_edf?"Cuenta con EDF":"No cuenta con EDF"),1)]),e("div",Z,r(s.volume)+" CU ",1)]),e("div",$,[e("span",{class:d([a.statusClass(s.trade_status),"text-xs font-semibold mr-2 px-2.5 py-1 rounded"])},[e("i",{class:d(a.statusIcon(s.trade_status))},null,2),i(" "+r(s.trade_status==="Approved"?"Aprobada":s.trade_status==="Rejected"?"Rechazada":s.trade_status==="Pending"?"Pendiente":s.trade_status),1)],2)])])]),e("div",ee,[e("div",te,[e("div",se,r(s.subcanal),1),e("div",oe," Ruta: "+r(s.route),1),e("div",le,[e("button",{class:"bg-red-500 text-white font-bold py-1 px-2 rounded-md w-full",onClick:m=>a.openDetailModal(s)},"Ver más",8,re)]),o.showDetailModal?(n(),h(_,{key:0,show:o.showDetailModal,permuta:o.selectedPermuta,onClose:l[5]||(l[5]=m=>o.showDetailModal=!1)},null,8,["show","permuta"])):k("",!0)])])]))),128))])])]),_:1})}const be=F(D,[["render",ae]]);export{be as default};
