import{d as _,y as L,l as E,o as d,c as m,w as C,a as e,t as o,u as b,m as N,z as M,f as w,g as u,A as R,n as r,e as i,h as P,F}from"./app-DXBpme-J.js";import{_ as V}from"./GuestLayout-Cw5LToKm.js";import B from"./AddPermutaModal-YK-zigKV.js";import j from"./CatalogoModal-lOn_E7Db.js";import"./Banner-akgUhka5.js";import"./PermutaSent-CwE4psp-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EdfTypesCarrousel-CaQiVGsP.js";import"./CondicionesCarrousel-tt2qRYld.js";const $={class:"grid grid-cols-2 gap-4 items-center"},J={class:"text-sm"},z={class:"font-bold text-sm text-black leading-tight"},H=e("option",{value:""},"TODOS",-1),Y=e("option",{value:"LUNES"},"Lunes",-1),Q=e("option",{value:"MARTES"},"Martes",-1),W=e("option",{value:"MIERCOLES"},"Miércoles",-1),q=e("option",{value:"JUEVES"},"Jueves",-1),K=e("option",{value:"VIERNES"},"Viernes",-1),X=e("option",{value:"SABADO"},"Sábado",-1),Z=e("option",{value:"DOMINGO"},"Domingo",-1),ee=[H,Y,Q,W,q,K,X,Z],te={class:"py-6"},se={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},oe={class:"overflow-hidden p-4"},ae={class:"flex flex-col gap-4"},le={class:"flex flex-row gap-4 w-3/4"},de={class:"bg-green-600 rounded-lg flex-1 flex flex-col p-4"},ne={class:"flex items-center justify-between w-full mb-2"},re=e("i",{class:"fa-solid fa-users text-white text-3xl"},null,-1),ie={class:"bg-white text-green-600 rounded-full px-2 font-bold"},ce=e("h3",{class:"text-md text-white"},"Clientes negociados",-1),ue={class:"text-white text-3xl font-bold text-left w-full"},fe={class:"bg-red-600 rounded-lg flex-1 flex flex-col p-4"},_e=e("div",{class:"flex items-center justify-start w-full mb-2"},[e("i",{class:"fa-solid fa-users text-white text-3xl"})],-1),he=e("h3",{class:"text-md text-white text-left"},"Clientes pendientes",-1),xe={class:"text-white text-3xl font-bold text-left"},ge=e("i",{class:"fa-solid fa-eye mr-2"},null,-1),Ee={class:"px-2"},pe=e("h1",{class:"p-2 font-bold"}," Lista de oportunidad Clientes ",-1),me={class:"pt-2 relative mx-auto text-gray-600 w-full"},be={class:"flex gap-2 my-4"},ve={class:"p-2 overflow-hidden shadow-xl sm:rounded-lg"},Ce={class:"flex flex-col gap-4"},Ne={class:"bg-white shadow-md rounded-lg overflow-hidden flex"},we={class:"flex-1 border-r border-gray-200"},Oe={class:"p-4"},De={class:"text-sm font-semibold"},Ae=e("i",{class:"fa-solid fa-user"},null,-1),ye={class:"text-sm"},Te=e("i",{class:"fa-solid fa-location-dot"},null,-1),Ie={class:"mt-2"},Se={key:0,class:"bg-red-100 text-red-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-red-200 dark:text-red-900"},ke=e("i",{class:"fa-solid fa-fax"},null,-1),Ue={key:1,class:"bg-yellow-100 text-yellow-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-yellow-200 dark:text-yellow-900"},Ge=e("i",{class:"fa-solid fa-fax"},null,-1),Le={key:0,class:"flex-1 text-left"},Me={class:"p-4 text-left"},Re=e("div",{class:"text-sm text-black font-bold"},"Puedes negociar",-1),Pe={class:"text-xs mt-1"},Fe=["href"],Ve=e("i",{class:"fa-brands fa-whatsapp"},null,-1),Be={key:1,class:"flex-1 text-left"},je={class:"p-4 text-left"},$e=e("div",{class:"text-sm font-medium text-black font-semibold"},[e("i",{class:"fa-solid fa-circle-check mr-2"}),u("Has Negociado ")],-1),Je={class:"flex items-center mt-2"},ze={class:"text-xs mt-1"},He={class:"flex items-center w-full mt-4"},Ye=e("i",{class:"fa-solid fa-handshake text-xs"},null,-1),Qe=[Ye],We=e("i",{class:"fa-solid fa-arrows-rotate text-xs"},null,-1),qe=[We],Ke=e("i",{class:"fa-solid fa-check text-xs"},null,-1),Xe=[Ke],Ze={class:"grid grid-cols-5 gap-1"},et=e("div",{class:"col-span-1"},null,-1),tt={class:"col-span-2 text-center text-sm font-medium text-gray-700"},st={key:0},ot=e("span",{class:"text-green-600 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded"}," En Ruta ",-1),at={class:"text-gray-400 text-xs"},lt={key:1,class:"text-green-600 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded"},dt={key:2,class:"text-green-600 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded"},nt=e("div",{class:"col-span-1"},null,-1),pt={__name:"InfoByRuta",props:{sv:String,ruta:String,clients:Array,negociados:Number,noNegociados:Number,gv:String,cuota:Number,pending:Number},setup(f){const c=f,h=_(""),l=_("todos"),n=_("");let v=_(!1),p=_(!1);const O=()=>["DOMINGO","LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"][new Date().getDay()],D=()=>{v.value=!1},A=()=>{p.value=!0},y=()=>{p.value=!1},T=()=>{window.location.href=`/gestor/${c.ruta}/permutas`};L(()=>{n.value=O()});const I=E(()=>{let a=new Map;return c.clients.filter(t=>{const x=t.COD_CLIENTE.toLowerCase().includes(h.value.toLowerCase()),U=t.CLIENTE.toLowerCase().includes(h.value.toLowerCase()),G=t.FREC_VISITA.includes(n.value)||n.value==="";let g=!1;return(l.value==="todos"||l.value==="pendientes"&&t.NEGOCIADO==="PENDIENTE"||l.value==="negociados"&&t.NEGOCIADO==="NEGOCIADO")&&(g=!0),!a.has(t.COD_CLIENTE)&&(x||U)&&g&&G?(a.set(t.COD_CLIENTE,!0),!0):!1}).sort((t,x)=>t.NEGOCIADO==="PENDIENTE"&&x.NEGOCIADO!=="PENDIENTE"?-1:t.NEGOCIADO!=="PENDIENTE"&&x.NEGOCIADO==="PENDIENTE"?1:0)});E(()=>{let a=new Map,s=0;return c.clients.forEach(t=>{t.NEGOCIADO==="NEGOCIADO"&&(t.FREC_VISITA.includes(n.value)||n.value==="")&&!a.has(t.COD_CLIENTE)&&(a.set(t.COD_CLIENTE,!0),s++)}),s}),E(()=>{let a=new Map,s=0;return c.clients.forEach(t=>{t.NEGOCIADO==="PENDIENTE"&&(t.FREC_VISITA.includes(n.value)||n.value==="")&&!a.has(t.COD_CLIENTE)&&(a.set(t.COD_CLIENTE,!0),s++)}),s});const S=E(()=>{const a=c.clients.length,s=c.negociados,t=c.cuota;return console.log("NEGOCIADOS:"),console.log(s),console.log("COUTA:"),console.log(t),a>0?Math.round(s/t*100):0}),k=new Date().toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}).replace(/^\w/,a=>a.toUpperCase());return(a,s)=>(d(),m(V,{title:"Dashboard | EDF"},{header:C(()=>[e("div",$,[e("div",null,[e("p",J,o(b(k)),1),e("h2",z," ¡Hola, "+o(c.gv)+"! ",1)]),e("div",null,[N(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>n.value=t),class:"block w-full mt-1 border border-gray-100 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 font-bold"},ee,512),[[M,n.value]])])])]),default:C(()=>[b(v)?(d(),m(B,{key:0,onClose:D,sv:f.sv,ruta:f.ruta},null,8,["sv","ruta"])):w("",!0),b(p)?(d(),m(j,{key:1,onClose:y})):w("",!0),e("div",te,[e("div",se,[e("div",oe,[e("div",ae,[e("div",le,[e("div",de,[e("div",ne,[re,e("span",ie,o(S.value)+"%",1)]),ce,e("p",ue,o(f.negociados),1)]),e("div",fe,[_e,he,e("p",xe,o(f.pending),1)])]),e("div",{class:"flex flex-row gap-4"},[e("button",{onClick:T,class:"bg-gray-400 text-white px-4 py-1 rounded-lg shadow-lg flex-1 font-bold"},[ge,u("Permutas ")]),e("button",{onClick:A,class:"bg-white text-black border-2 border-black px-4 py-1 rounded-lg shadow-lg flex-1 font-bold"}," Ver catálogo EDF ")])])]),e("div",Ee,[pe,e("div",me,[N(e("input",{class:"border-2 border-gray-300 bg-white h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none w-full",type:"search",name:"search",placeholder:"Buscar","onUpdate:modelValue":s[1]||(s[1]=t=>h.value=t)},null,512),[[R,h.value]])]),e("div",be,[e("button",{class:r(["px-4 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":l.value==="todos","bg-white text-black":l.value!=="todos"}]),onClick:s[2]||(s[2]=t=>l.value="todos")},"Todos",2),e("button",{class:r(["px-4 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":l.value==="pendientes","bg-white text-black":l.value!=="pendientes"}]),onClick:s[3]||(s[3]=t=>l.value="pendientes")},"No Negociados",2),e("button",{class:r(["px-4 py-1 text-sm rounded-full border-black border-2",{"bg-black text-white":l.value==="negociados","bg-white text-black":l.value!=="negociados"}]),onClick:s[4]||(s[4]=t=>l.value="negociados")},"Negociados",2)])]),e("div",ve,[e("div",Ce,[(d(!0),i(F,null,P(I.value,t=>(d(),i("div",Ne,[e("div",we,[e("div",Oe,[e("div",De,[Ae,u(" "+o(t.COD_CLIENTE)+" - "+o(t.CLIENTE),1)]),e("div",ye,[Te,u(" "+o(t.DIRECCION),1)]),e("div",Ie,[t.N_EDF==0?(d(),i("span",Se,[ke,u(" No cuenta con EDF ")])):(d(),i("span",Ue,[Ge,u(" Cuenta con "+o(t.N_EDF)+" EDF ",1)]))])])]),t.NEGOCIADO=="PENDIENTE"?(d(),i("div",Le,[e("div",Me,[Re,e("div",Pe,"EDF - "+o(t.PUERTAS_A_NEGOCIAR)+" Puertas - "+o(t.CONDICION.charAt(0).toUpperCase()+t.CONDICION.slice(1).toLowerCase()),1),e("a",{href:"https://wa.link/ibba8o",target:"_blank",class:"ml-auto bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded-md"},[Ve,u(" Negociar EDF ")],8,Fe)])])):(d(),i("div",Be,[e("div",je,[$e,e("div",Je,[e("div",ze,"EDF - "+o(t.PUERTAS_A_NEGOCIAR)+" Puertas - "+o(t.CONDICION.charAt(0).toUpperCase()+t.CONDICION.slice(1).toLowerCase()),1)]),e("ol",He,[e("li",{class:r([{"text-green-500":t.NEGOCIADO==="NEGOCIADO","text-gray-300":t.NEGOCIADO!=="NEGOCIADO"},"flex w-full items-center after:content-[''] after:w-full after:h-0.5 after:border-b after:border-gray-200 after:border-2 after:inline-block dark:after:border-gray-600"])},[e("span",{class:r(["flex items-center justify-center w-8 h-8 rounded-full lg:h-10 lg:w-10 shrink-0",{"bg-green-50":t.NEGOCIADO==="NEGOCIADO","bg-gray-50":t.NEGOCIADO!=="NEGOCIADO"}])},Qe,2)],2),e("li",{class:r([{"text-white":t.STATUS==="EN RUTA","text-gray-300":t.STATUS!=="EN RUTA"},"flex w-full items-center after:content-[''] after:w-full after:h-0.5 after:border-b after:border-gray-200 after:border-2 after:inline-block dark:after:border-gray-600"])},[e("span",{class:r(["flex items-center justify-center w-8 h-8 rounded-full lg:h-10 lg:w-10 shrink-0",{"bg-green-500":t.STATUS==="EN RUTA","bg-gray-50":t.STATUS!=="EN RUTA"}])},qe,2)],2),e("li",{class:r([{"text-green-500":t.STATUS==="ENTREGADO","text-gray-300":t.STATUS!=="ENTREGADO"},"flex w-full items-center"])},[e("span",{class:r(["flex items-center justify-center w-8 h-8 rounded-full lg:h-10 lg:w-10 shrink-0",{"bg-green-50":t.STATUS==="ENTREGADO","bg-gray-50":t.STATUS!=="ENTREGADO"}])},Xe,2)],2)]),e("div",Ze,[et,e("div",tt,[t.STATUS==="EN RUTA"?(d(),i("div",st,[ot,e("div",null,[e("strong",null,[e("span",at,"Faltan "+o([3,5,7,9][Math.floor(Math.random()*4)])+" días",1)])])])):t.STATUS==="ENTREGADO"?(d(),i("span",lt," Entregado ")):(d(),i("span",dt,o(t.STATUS.charAt(0).toUpperCase()+t.STATUS.slice(1).toLowerCase()),1))]),nt])])]))]))),256))])])])])]),_:1}))}};export{pt as default};
